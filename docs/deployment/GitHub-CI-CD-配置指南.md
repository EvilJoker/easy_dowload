# GitHub CI/CD é…ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç» Easy Translate é¡¹ç›®çš„ GitHub Actions CI/CD é…ç½®ï¼ŒåŒ…æ‹¬è‡ªåŠ¨æ„å»ºã€æµ‹è¯•ã€å®‰å…¨æ‰«æå’Œå‘å¸ƒæµç¨‹ã€‚

## ğŸ—ï¸ å·¥ä½œæµç»“æ„

```
.github/
â”œâ”€â”€ workflows/
â”‚   â”œâ”€â”€ docker-build.yml      # Docker æ„å»ºå’Œæ¨é€
â”‚   â”œâ”€â”€ test.yml             # æµ‹è¯•å’Œä»£ç è´¨é‡æ£€æŸ¥
â”‚   â”œâ”€â”€ security.yml         # å®‰å…¨æ‰«æ
â”‚   â”œâ”€â”€ release.yml          # å‘å¸ƒæµç¨‹
â”‚   â””â”€â”€ dependabot.yml       # ä¾èµ–æ›´æ–°
â””â”€â”€ dependabot.yml           # Dependabot é…ç½®
```

## ğŸš€ å·¥ä½œæµè¯´æ˜

### 1. Docker æ„å»ºå’Œæ¨é€ (docker-build.yml)

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° main/develop åˆ†æ”¯
- åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ (v*)
- Pull Request åˆ° main åˆ†æ”¯

**åŠŸèƒ½ï¼š**
- å¤šæ¶æ„é•œåƒæ„å»º (linux/amd64, linux/arm64)
- è‡ªåŠ¨æ¨é€åˆ° GitHub Container Registry
- æ™ºèƒ½æ ‡ç­¾ç®¡ç†
- æ„å»ºç¼“å­˜ä¼˜åŒ–

**é•œåƒåœ°å€ï¼š**
```
ghcr.io/{username}/easy-translate-backend:{tag}
```

### 2. æµ‹è¯•å·¥ä½œæµ (test.yml)

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° main/develop åˆ†æ”¯
- Pull Request åˆ° main åˆ†æ”¯

**åŠŸèƒ½ï¼š**
- Python ä»£ç è´¨é‡æ£€æŸ¥ (flake8)
- ä»£ç æ ¼å¼æ£€æŸ¥ (black)
- å•å…ƒæµ‹è¯•æ‰§è¡Œ (pytest)
- ä»£ç è¦†ç›–ç‡æŠ¥å‘Š
- è‡ªåŠ¨ä¸Šä¼ åˆ° Codecov

### 3. å®‰å…¨æ‰«æ (security.yml)

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° main/develop åˆ†æ”¯
- Pull Request åˆ° main åˆ†æ”¯
- æ¯å‘¨ä¸€å‡Œæ™¨ 2 ç‚¹å®šæ—¶æ‰«æ

**åŠŸèƒ½ï¼š**
- Python ä¾èµ–æ¼æ´æ‰«æ (safety)
- Docker é•œåƒå®‰å…¨æ‰«æ (Trivy)
- è‡ªåŠ¨ä¸Šä¼ åˆ° GitHub Security é¡µé¢

### 4. å‘å¸ƒå·¥ä½œæµ (release.yml)

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€ç‰ˆæœ¬æ ‡ç­¾ (v*)

**åŠŸèƒ½ï¼š**
- æ„å»ºç”Ÿäº§é•œåƒ
- æ¨é€åˆ°å®¹å™¨ä»“åº“
- è‡ªåŠ¨åˆ›å»º GitHub Release
- ç”Ÿæˆå‘å¸ƒè¯´æ˜

### 5. ä¾èµ–æ›´æ–° (dependabot.yml)

**è§¦å‘æ¡ä»¶ï¼š**
- Dependabot åˆ›å»ºçš„ Pull Request

**åŠŸèƒ½ï¼š**
- è‡ªåŠ¨åˆå¹¶è¡¥ä¸ç‰ˆæœ¬æ›´æ–°
- å¯¹é‡è¦æ›´æ–°è¿è¡Œæµ‹è¯•
- æ™ºèƒ½ä¾èµ–ç®¡ç†

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

```yaml
env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}/easy-translate-backend
```

### æƒé™é…ç½®

```yaml
permissions:
  contents: read/write
  packages: write
  security-events: write
```

### ç¼“å­˜ç­–ç•¥

```yaml
cache-from: type=gha
cache-to: type=gha,mode=max
```

## ğŸ“Š ç›‘æ§å’ŒæŠ¥å‘Š

### æ„å»ºçŠ¶æ€

- **ç»¿è‰²**ï¼šæ‰€æœ‰æ£€æŸ¥é€šè¿‡
- **é»„è‰²**ï¼šéƒ¨åˆ†æ£€æŸ¥é€šè¿‡ï¼Œéœ€è¦äººå·¥å¹²é¢„
- **çº¢è‰²**ï¼šæ„å»ºå¤±è´¥ï¼Œéœ€è¦ä¿®å¤

### æŠ¥å‘Šä½ç½®

- **æµ‹è¯•è¦†ç›–ç‡**ï¼šCodecov
- **å®‰å…¨æ¼æ´**ï¼šGitHub Security é¡µé¢
- **æ„å»ºæ—¥å¿—**ï¼šGitHub Actions é¡µé¢
- **é•œåƒä»“åº“**ï¼šGitHub Container Registry

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥**
   ```bash
   # æ£€æŸ¥ Dockerfile è¯­æ³•
   docker build -f docker/Dockerfile .
   
   # æ£€æŸ¥ä¾èµ–å®‰è£…
   cd 02backend && uv sync
   ```

2. **æµ‹è¯•å¤±è´¥**
   ```bash
   # æœ¬åœ°è¿è¡Œæµ‹è¯•
   cd 02backend && uv run pytest tests/
   
   # æ£€æŸ¥ä»£ç æ ¼å¼
   uv run black --check src/
   ```

3. **å®‰å…¨æ‰«æå¤±è´¥**
   ```bash
   # æ£€æŸ¥ä¾èµ–æ¼æ´
   uv run safety check
   
   # æ‰«æ Docker é•œåƒ
   trivy image easy-translate-backend:latest
   ```

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

### ä¾èµ–ç®¡ç†
- å®šæœŸæ›´æ–°ä¾èµ–
- ä½¿ç”¨å®‰å…¨æ‰«æå·¥å…·
- é”å®šä¾èµ–ç‰ˆæœ¬

### é•œåƒå®‰å…¨
- ä½¿ç”¨å®˜æ–¹åŸºç¡€é•œåƒ
- å®šæœŸæ›´æ–°åŸºç¡€é•œåƒ
- æ‰«æé•œåƒæ¼æ´

### æƒé™ç®¡ç†
- æœ€å°æƒé™åŸåˆ™
- å®šæœŸå®¡æŸ¥æƒé™
- ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ„å»ºä¼˜åŒ–
- ä½¿ç”¨å¤šé˜¶æ®µæ„å»º
- å¯ç”¨æ„å»ºç¼“å­˜
- å¹¶è¡Œæ‰§è¡Œä»»åŠ¡

### æµ‹è¯•ä¼˜åŒ–
- å¹¶è¡Œè¿è¡Œæµ‹è¯•
- ä½¿ç”¨æµ‹è¯•ç¼“å­˜
- æ™ºèƒ½æµ‹è¯•é€‰æ‹©

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æäº¤ä»£ç 
1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
3. ç¡®ä¿ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡
4. åˆ›å»º Pull Request

### å‘å¸ƒæµç¨‹
1. æ›´æ–°ç‰ˆæœ¬å·
2. åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
3. ç­‰å¾… CI/CD å®Œæˆ
4. éªŒè¯å‘å¸ƒç»“æœ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Easy Translate å®¹å™¨åŒ–æ–¹æ¡ˆæ–‡æ¡£](../feature/Easy-Translate-å®¹å™¨åŒ–æ–¹æ¡ˆæ–‡æ¡£-v1.0.md)
- [Docker éƒ¨ç½²æŒ‡å—](./docker/README.md)
- [GitHub Actions å®˜æ–¹æ–‡æ¡£](https://docs.github.com/en/actions)

---

## ğŸ“ å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | è´Ÿè´£äºº |
|------|------|----------|--------|
| v1.0 | 2025-07-15 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæˆ CI/CD é…ç½® | å¼€å‘å›¢é˜Ÿ | 