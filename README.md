# easy_translate

## 项目概述

一个 Microsoft Edge 浏览器插件，旨在简化文件传输流程。用户可以直接将网页上的下载链接文件传输到目标服务器，无需经过本地下载-上传的中间步骤，大幅提升传输效率。

## 功能描述

### 核心功能
- **智能链接识别**：自动识别网页中的下载链接
- **一键远程下载**：在下载链接旁添加快速传输按钮
- **服务器管理**：支持多服务器配置和管理
- **传输历史**：记录和管理最近的传输操作

### MVP 产品功能
1. **下载链接识别**：自动扫描页面，识别可下载的文件链接
2. **服务器配置**：
   - 手动输入服务器连接信息（IP、端口、用户名、密码等）
   - 下拉列表选择已配置的服务器
3. **服务器记忆功能**：
   - 保存常用服务器配置
   - 最近使用的服务器优先显示
   - 支持服务器配置的增删改查

## 实现思路

### 1. 技术架构
- **前端**：使用 Manifest V3 开发 Edge 插件
- **UI 框架**：HTML5 + CSS3 + JavaScript (ES6+)
- **存储**：Chrome Storage API 存储服务器配置和历史记录
- **通信**：Content Scripts + Background Scripts

### 2. 核心模块设计

#### 2.1 内容脚本 (Content Script)
- **链接识别器**：使用正则表达式和 DOM 解析识别下载链接
- **UI 注入器**：在识别到的链接旁动态插入传输按钮
- **用户交互处理**：处理按钮点击、弹窗显示等交互

#### 2.2 背景脚本 (Background Script)
- **文件传输引擎**：处理文件下载和远程传输逻辑
- **服务器连接管理**：管理 SSH/SFTP/FTP 等协议连接
- **配置管理**：处理服务器配置的持久化存储

#### 2.3 弹窗界面 (Popup)
- **服务器选择界面**：展示可用服务器列表
- **快速配置界面**：允许用户快速添加新服务器
- **传输状态显示**：实时显示传输进度和状态

### 3. 关键技术实现

#### 3.1 链接识别算法
```javascript
// 识别常见下载链接模式
const downloadPatterns = [
  /\.(zip|rar|7z|tar|gz|exe|msi|deb|rpm|dmg|iso)$/i,
  /\/download\//i,
  /download\?/i,
  /attachment/i
];
```

#### 3.2 文件传输流程
1. **链接验证**：验证下载链接的有效性
2. **流式下载**：使用 fetch API 获取文件流
3. **远程传输**：通过 WebRTC 或 WebSocket 代理传输到目标服务器
4. **进度监控**：实时反馈传输进度和状态

#### 3.3 服务器连接实现
- **协议支持**：SFTP、FTP、SCP
- **认证方式**：密码认证、SSH密钥认证
- **连接池管理**：复用连接，提高传输效率

### 4. 数据存储结构

#### 4.1 服务器配置
```json
{
  "servers": [
    {
      "id": "server_1",
      "name": "生产服务器",
      "host": "192.168.1.100",
      "port": 22,
      "username": "admin",
      "protocol": "sftp",
      "defaultPath": "/home/uploads/",
      "lastUsed": "2024-01-15T10:30:00Z"
    }
  ]
}
```

#### 4.2 传输历史
```json
{
  "history": [
    {
      "id": "transfer_1",
      "fileName": "example.zip",
      "sourceUrl": "https://example.com/download/file.zip",
      "targetServer": "server_1",
      "targetPath": "/home/uploads/example.zip",
      "timestamp": "2024-01-15T10:30:00Z",
      "status": "completed",
      "fileSize": 1048576
    }
  ]
}
```

### 5. 开发阶段规划

#### Phase 1: 基础功能 (MVP)
- [ ] 基础插件框架搭建
- [ ] 简单链接识别功能
- [ ] 基础 UI 界面
- [ ] 服务器配置功能

#### Phase 2: 核心传输功能
- [ ] 文件传输引擎实现
- [ ] 支持主流传输协议
- [ ] 传输进度显示
- [ ] 错误处理机制

#### Phase 3: 用户体验优化
- [ ] 智能链接识别优化
- [ ] 批量传输功能
- [ ] 传输历史管理
- [ ] 界面美化和交互优化

### 6. 技术挑战与解决方案

#### 6.1 跨域限制
- **问题**：浏览器跨域政策限制
- **解决方案**：使用 Manifest 权限声明，通过 Background Script 代理请求

#### 6.2 文件流处理
- **问题**：大文件下载和传输的内存管理
- **解决方案**：分块下载，流式处理，避免内存溢出

#### 6.3 服务器连接安全
- **问题**：敏感信息（密码、密钥）的安全存储
- **解决方案**：使用浏览器加密存储 API，支持主密码保护

## 安装与使用

### 开发环境搭建
1. 克隆项目：`git clone https://github.com/username/easy_translate.git`
2. 安装依赖：`npm install`
3. 构建项目：`npm run build`
4. 加载到 Edge：开发者模式 -> 加载已解压的扩展程序

### 使用说明
1. 安装插件后，浏览包含下载链接的网页
2. 插件自动识别下载链接，显示传输按钮
3. 点击按钮，选择目标服务器
4. 确认后开始直接传输到远程服务器

## 贡献指南

欢迎提交 Issue 和 Pull Request 来改进项目！

## 许可证

MIT License
